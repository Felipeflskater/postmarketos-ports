--- a/arch/arm/kernel/entry-armv.S
+++ b/arch/arm/kernel/entry-armv.S
@@ -1,3 +1,35 @@
+	.arm
+	.syntax unified
+
+#ifndef __LINUX_ARM_ARCH__
+#define __LINUX_ARM_ARCH__ 7
+#endif
+
+#undef CONFIG_THUMB2_KERNEL
+
+	.macro	arm args:vararg
+	\args
+	.endm
+
+	.macro	thumb args:vararg
+	.endm
+
+	.macro	W instr:vararg
+	\instr
+	.endm
+
+	.macro	w instr:vararg
+	\instr
+	.endm
+
+#define BSYM(x) x
+
+	.macro	store_user_sp_lr base:req, tmp:req, offset:req
+	stmdb	\base, {sp, lr}^
+	.endm
+
 /*
  *  linux/arch/arm/kernel/entry-armv.S
  *
--- a/arch/arm/mm/cache-v7.S
+++ b/arch/arm/mm/cache-v7.S
@@ -1,3 +1,28 @@
+	.arm
+	.syntax unified
+
+#ifndef __LINUX_ARM_ARCH__
+#define __LINUX_ARM_ARCH__ 7
+#endif
+
+#undef CONFIG_THUMB2_KERNEL
+
+	.macro	arm args:vararg
+	\args
+	.endm
+
+	.macro	thumb args:vararg
+	.endm
+
+	.macro	W instr:vararg
+	\instr
+	.endm
+
+	.macro	w instr:vararg
+	\instr
+	.endm
+
+#define BSYM(x) x
+
 /*
  *  linux/arch/arm/mm/cache-v7.S
  *
--- a/arch/arm/kernel/entry-common.S
+++ b/arch/arm/kernel/entry-common.S
@@ -1,3 +1,28 @@
+	.arm
+	.syntax unified
+
+#ifndef __LINUX_ARM_ARCH__
+#define __LINUX_ARM_ARCH__ 7
+#endif
+
+#undef CONFIG_THUMB2_KERNEL
+
+	.macro	arm args:vararg
+	\args
+	.endm
+
+	.macro	thumb args:vararg
+	.endm
+
+	.macro	W instr:vararg
+	\instr
+	.endm
+
+	.macro	w instr:vararg
+	\instr
+	.endm
+
+#define BSYM(x) x
+
 /*
  *  linux/arch/arm/kernel/entry-common.S
  *
--- a/arch/arm/mm/proc-v7.S
+++ b/arch/arm/mm/proc-v7.S
@@ -1,3 +1,28 @@
+	.arm
+	.syntax unified
+
+#ifndef __LINUX_ARM_ARCH__
+#define __LINUX_ARM_ARCH__ 7
+#endif
+
+#undef CONFIG_THUMB2_KERNEL
+
+	.macro	arm args:vararg
+	\args
+	.endm
+
+	.macro	thumb args:vararg
+	.endm
+
+	.macro	W instr:vararg
+	\instr
+	.endm
+
+	.macro	w instr:vararg
+	\instr
+	.endm
+
+#define BSYM(x) x
+
 /*
  *  linux/arch/arm/mm/proc-v7.S
  *
