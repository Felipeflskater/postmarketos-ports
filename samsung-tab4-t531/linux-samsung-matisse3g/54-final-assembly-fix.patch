--- a/arch/arm/kernel/entry-armv.S.orig
+++ b/arch/arm/kernel/entry-armv.S
@@ -1176,7 +1176,7 @@
 	@  ARM        Thumb          Jump
 	@  r3 = ARM   r3 = Thumb     Action
 	@  
-	.long	__sys_trace + (0x00000012^0x00000013|PSR_ISETSTATE)
+	.long	__sys_trace
 	.long	__sys_trace_return + (0x00000012^0x00000013|PSR_ISETSTATE)
 	.long	__pabt_usr + (0x00000012^0x00000013|PSR_ISETSTATE)
 	.long	__pabt_usr + (0x00000012^0x00000013|PSR_ISETSTATE)
@@ -1200,7 +1200,7 @@
 	@  ARM        Thumb          Jump
 	@  r3 = ARM   r3 = Thumb     Action
 	@  
-	.long	__sys_trace + (0x00000017^0x00000013|PSR_ISETSTATE)
+	.long	__sys_trace
 	.long	__sys_trace_return + (0x00000017^0x00000013|PSR_ISETSTATE)
 	.long	__pabt_usr + (0x00000017^0x00000013|PSR_ISETSTATE)
 	.long	__pabt_usr + (0x00000017^0x00000013|PSR_ISETSTATE)
@@ -1224,7 +1224,7 @@
 	@  ARM        Thumb          Jump
 	@  r3 = ARM   r3 = Thumb     Action
 	@  
-	.long	__sys_trace + (0x00000017^0x00000013|PSR_ISETSTATE)
+	.long	__sys_trace
 	.long	__sys_trace_return + (0x00000017^0x00000013|PSR_ISETSTATE)
 	.long	__pabt_usr + (0x00000017^0x00000013|PSR_ISETSTATE)
 	.long	__pabt_usr + (0x00000017^0x00000013|PSR_ISETSTATE)
@@ -1264,7 +1264,7 @@
 	@  ARM        Thumb          Jump
 	@  r3 = ARM   r3 = Thumb     Action
 	@  
-	.long	__sys_trace + (0x0000001b^0x00000013|PSR_ISETSTATE)
+	.long	__sys_trace
 	.long	__sys_trace_return + (0x0000001b^0x00000013|PSR_ISETSTATE)
 	.long	__pabt_usr + (0x0000001b^0x00000013|PSR_ISETSTATE)
 	.long	__pabt_usr + (0x0000001b^0x00000013|PSR_ISETSTATE)
--- a/arch/arm/mm/proc-v7.S.orig
+++ b/arch/arm/mm/proc-v7.S
@@ -343,7 +343,7 @@
 	orreq	r0, r0, r10			@ Enable CPU-specific SMP bits
 	mcr	p15, 0, r0, c1, c0, 1		@ write aux ctl reg
 	b	__v7_setup			@ tail call
-@ define MULTI_CPU_SECONDARY
+	@ MULTI_CPU_SECONDARY defined
 
 /*
  *	__v7_proc_info
@@ -355,7 +355,6 @@
 	.macro __v7_proc name, initfunc, mm_mmuflags = 0, io_mmuflags = 0, hwcaps = 0
 	ALT_SMP(.long	PMD_TYPE_SECT | PMD_SECT_AP_WRITE | PMD_SECT_AP_READ | \
 			PMD_SECT_AF | PMD_FLAGS_SMP | \mm_mmuflags)
-	ALT_UP(.long	PMD_TYPE_SECT | PMD_SECT_AP_WRITE | PMD_SECT_AP_READ | \
-			PMD_SECT_AF | PMD_FLAGS_UP | \mm_mmuflags)
+	ALT_UP(.long	PMD_TYPE_SECT | PMD_SECT_AP_WRITE | PMD_SECT_AP_READ | PMD_SECT_AF | PMD_FLAGS_UP | \mm_mmuflags)
 	.long	PMD_TYPE_SECT | PMD_SECT_XN | PMD_SECT_AP_WRITE | \
 		PMD_SECT_AP_READ | PMD_SECT_AF | \io_mmuflags
-	W(b)	\initfunc
 	b	\initfunc
 	.long	cpu_arch_name
@@ -380,7 +379,7 @@
 __v7_ca5mp_proc_info:
 	.long	0x410fc050
 	.long	0xff0ffff0
-	__v7_proc __v7_ca5mp_setup, initfunc = __v7_ca5mp_setup, hwcaps = HWCAP_IDIV
+	__v7_proc __v7_ca5mp_setup, __v7_ca5mp_setup, 0, 0, HWCAP_IDIV
 	.size	__v7_ca5mp_proc_info, . - __v7_ca5mp_proc_info
 
 	/*
@@ -390,7 +389,7 @@
 __v7_ca9mp_proc_info:
 	.long	0x410fc090
 	.long	0xff0ffff0
-	__v7_proc __v7_ca9mp_setup, initfunc = __v7_ca9mp_setup
+	__v7_proc __v7_ca9mp_setup, __v7_ca9mp_setup
 	.size	__v7_ca9mp_proc_info, . - __v7_ca9mp_proc_info