--- a/include/linux/kernel.h
+++ b/include/linux/kernel.h
@@ -1,6 +1,7 @@
 #ifndef _LINUX_KERNEL_H
 #define _LINUX_KERNEL_H
 
+#include <linux/types.h>
 #include <stdarg.h>
 #include <linux/linkage.h>
 #include <linux/stddef.h>
--- a/include/linux/jiffies.h
+++ b/include/linux/jiffies.h
@@ -7,6 +7,12 @@
 #include <linux/math64.h>
 #include <asm/param.h>			/* for HZ */
 
+/* Fix para HZ não definido */
+#ifndef HZ
+#define HZ 250
+#endif
+#ifndef CLOCK_TICK_RATE  
+#define CLOCK_TICK_RATE 19200000
+#endif
+
 /*
--- a/arch/arm/kernel/asm-offsets.c
+++ b/arch/arm/kernel/asm-offsets.c
@@ -8,11 +8,13 @@
  * it under the terms of the GNU General Public License version 2 as
  * published by the Free Software Foundation.
  */
+#include <linux/types.h>
+#include <linux/stddef.h>
 #include <linux/sched.h>
 #include <linux/mm.h>
-#include <linux/dma-mapping.h>
 #include <linux/string.h>
-#include <asm/memory.h>
+/* Incluir headers ARM em ordem correta */
+#include <linux/dma-mapping.h>
 #include <asm/procinfo.h>
 #include <asm/thread_info.h>
 #include <asm/memory.h>
--- a/scripts/mod/devicetable-offsets.c
+++ b/scripts/mod/devicetable-offsets.c
@@ -1,11 +1,25 @@
+/* Fix fundamental para devicetable offsets */
+
+/* Definir tipos básicos antes de qualquer coisa */
+#ifndef __u8
+typedef unsigned char __u8;
+#endif
+#ifndef __u16  
+typedef unsigned short __u16;
+#endif
+#ifndef __u32
+typedef unsigned int __u32;
+#endif
+#ifndef __u64
+typedef unsigned long long __u64;
+#endif
+#ifndef kernel_ulong_t
+typedef unsigned long kernel_ulong_t;
+#endif
+
 #include <linux/kbuild.h>
-#include <linux/types.h>
 #include <linux/stddef.h>
-
-/* Definir todos os tipos básicos necessários */
-#ifndef __u8
-typedef unsigned char __u8;