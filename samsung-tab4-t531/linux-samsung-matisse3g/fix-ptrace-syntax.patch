--- a/arch/arm/include/asm/ptrace.h
+++ b/arch/arm/include/asm/ptrace.h
@@ -49,7 +49,7 @@ struct pt_regs {
 	long uregs[18];
 };
 
-#define ARM_cpsr	uregs[16] 
+#define ARM_cpsr	uregs[16]
 #define ARM_pc		uregs[15]
 #define ARM_lr		uregs[14]
 #define ARM_sp		uregs[13]
@@ -107,10 +107,15 @@ extern unsigned long profile_pc(struct pt_regs *regs);
 #define task_pt_regs(task) \
 	((struct pt_regs *)(THREAD_START_SP + task_stack_page(task)) - 1)
 
-/* Ensure pt_regs structure is properly aligned */
-static_assert((sizeof(struct pt_regs) % 8) == 0, "pt_regs must be 8-byte aligned");
+#ifdef __KERNEL__
+#ifndef __ASSEMBLY__
+/* Ensure pt_regs structure is properly aligned for kernel 3.4.x */
+#if defined(__STDC_VERSION__) && __STDC_VERSION__ >= 201112L
+_Static_assert((sizeof(struct pt_regs) % 8) == 0, "pt_regs must be 8-byte aligned");
+#endif
+#endif
+#endif
 
 extern unsigned long profile_pc(struct pt_regs *regs);
 
-#endif /* __ASSEMBLY__ */
+#endif
