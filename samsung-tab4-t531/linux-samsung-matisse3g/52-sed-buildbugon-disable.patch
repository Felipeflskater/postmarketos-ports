--- a/scripts/fix-buildbugon.sh
+++ b/scripts/fix-buildbugon.sh
@@ -0,0 +1,10 @@
+#!/bin/bash
+# Script to fix BUILD_BUG_ON issues in kernel source
+
+# Comment out the problematic BUILD_BUG_ON line in rcupdate.h
+sed -i 's/BUILD_BUG_ON(!__builtin_constant_p(offset));/\/\* BUILD_BUG_ON(!__builtin_constant_p(offset)); \*\//' include/linux/rcupdate.h
+
+# Force __LINUX_ARM_ARCH__ definition in critical files
+sed -i '1i #ifndef __LINUX_ARM_ARCH__\n#define __LINUX_ARM_ARCH__ 7\n#endif' arch/arm/include/asm/spinlock.h
+sed -i '1i #ifndef __LINUX_ARM_ARCH__\n#define __LINUX_ARM_ARCH__ 7\n#endif' arch/arm/include/asm/div64.h
+sed -i '1i #ifndef __LINUX_ARM_ARCH__\n#define __LINUX_ARM_ARCH__ 7\n#endif' arch/arm/include/asm/atomic.h
